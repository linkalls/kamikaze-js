var p=Object.defineProperty;var l=(a,e)=>p(a,"name",{value:e,configurable:!0});var m=class a{static{l(this,"Nova")}constructor(e){this.element=e instanceof Element?e:document.createElement(e),this.data={},this.proxyData=null,this.templateNodes=new Map}static select(e){let t=document.querySelector(e);return t?new a(t):null}static selectAll(e){return Array.from(document.querySelectorAll(e)).map(t=>new a(t))}bindData(e){return this.data=e,this.proxyData=new Proxy(this.data,{set:l((t,n,r)=>(t[n]=r,this.updateInterpolation(),!0),"set")}),this.saveTemplates(this.element),this.updateInterpolation(),this}saveTemplates(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),n;for(;n=t.nextNode();)n.textContent.includes("{{")&&this.templateNodes.set(n,n.textContent)}updateInterpolation(){this.templateNodes.forEach((e,t)=>{if(t.parentNode){let n=e;Object.keys(this.data).forEach(r=>{let s=new RegExp(`{{${r}}}`,"g");n=n.replace(s,this.data[r])}),t.textContent!==n&&(t.textContent=n)}else this.templateNodes.delete(t)}),this.updateAllBindings()}updateAllBindings(){this.element.querySelectorAll("[data-bind]").forEach(t=>{t.getAttribute("data-bind").split(",").forEach(r=>{let[s,h]=r.split(":").map(o=>o.trim());if(s in this.proxyData){let o=h||"value";if(t.tagName==="INPUT"||t.tagName==="TEXTAREA")o==="value"&&(document.activeElement!==t&&(t.value=this.proxyData[s]),t._novaListenerAdded||(t.addEventListener("input",i=>{this.proxyData[s]=i.target.value}),t._novaListenerAdded=!0));else{let i=t.firstChild;if(i&&i.nodeType===Node.TEXT_NODE){this.templateNodes.has(i)||this.templateNodes.set(i,i.textContent);let d=this.templateNodes.get(i).replace(`{{${s}}}`,this.proxyData[s]);i.textContent!==d&&(i.textContent=d)}}}})})}setStyle(e,t){return this.element.style[e]=t,this}addClass(e){return this.element.classList.add(e),this}removeClass(e){return this.element.classList.remove(e),this}toggleClass(e){return this.element.classList.toggle(e),this}on(e,t){return this.element.addEventListener(e,t),this}onDelegated(e,t,n){return this.element.addEventListener(e,function(r){let s=r.target.closest(t);s&&this.element.contains(s)&&n.call(s,r)}.bind(this)),this}in(e){if(e instanceof a)this.element.appendChild(e.element);else if(e instanceof Node)this.element.appendChild(e);else if(typeof e=="string"){let t=document.createElement("div");for(t.innerHTML=e;t.firstChild;)this.element.appendChild(t.firstChild)}return this.saveTemplates(this.element),this.updateInterpolation(),this}innerHTML(e){return this.element.innerHTML=e,this.saveTemplates(this.element),this.updateInterpolation(),this}innerText(e){return this.element.innerText=e,this.saveTemplates(this.element),this.updateInterpolation(),this}remove(){return this.element.remove(),this}scrollTo(e=400){let t=window.pageYOffset,n=this.element.getBoundingClientRect().top+t,r="now"in window.performance?performance.now():new Date().getTime(),s=l(h=>{let o=h-r,i=Math.min(o/e,1);window.scrollTo(0,t+(n-t)*i),i<1&&requestAnimationFrame(s)},"scroll");return requestAnimationFrame(s),this}insertBefore(e){return e instanceof a?this.element.parentNode.insertBefore(e.element,this.element):e instanceof Node&&this.element.parentNode.insertBefore(e,this.element),this}insertAfter(e){return e instanceof a?this.element.parentNode.insertBefore(e.element,this.element.nextSibling):e instanceof Node&&this.element.parentNode.insertBefore(e,this.element.nextSibling),this}getAttribute(e){return this.element.getAttribute(e)}setAttribute(e,t){return this.element.setAttribute(e,t),this}removeAttribute(e){return this.element.removeAttribute(e),this}},f=m;export{f as default};
